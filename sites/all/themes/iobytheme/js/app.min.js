!function(p){Drupal.behaviors.iobytheme={attach:function(e,t){function i(e){p(e).hover(function(){p(this).children(".extra-info").addClass("is-active")},function(){p(this).children(".extra-info").removeClass("is-active")})}function a(e){if(0<p("#"+e+"-D").length)return p("#"+e+"-D").find(".errMsg").remove(),!!p("#"+e).val()||(p("#"+e+"-D").append('<div id="'+e+'-E" class="errMsg"><span>This field is required.</span></div>'),!1)}function n(e){ga("send","event",e.category.toLowerCase(),e.action.toLowerCase(),e.label.toLowerCase())}p(".page-add-project-step-2 fieldset.filter-wrapper").remove(),p(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-latitude").remove(),p(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-longitude").remove(),p(".node-project_2-form .location .location-current-coordinates-fieldset").remove(),p("a.login",e).click(function(){return p(this).toggleClass("activated").siblings(".region").fadeToggle("fast"),!1}),""!=p("#edit-search-block-form--2").val()&&p("#search-block-form label").hide(),p("#search-block-form label, #mc_embed_signup label, #mc_home_embed_signup label").click(function(){p(this).fadeOut("fast").next("input").focus()}),p("#search-block-form input, #mc_embed_signup input, #mc_home_embed_signup input").focus(function(){p(this).prev("label:visible").fadeOut("fast")}).blur(function(){""==p(this).val()&&p(this).prev("label").fadeIn("fast")}),p("body.page-add-project-step-2 .preview").length&&(p(".ioby-step-indicator li").removeClass("current").last().addClass("current"),p(".preview h3:first-child:visible").hide()),p("body.node-type-project-2 .project-tabs li a").click(function(){return p(this).parent("li").hasClass("active")||(p(".project-tabs li").removeClass("active"),p(this).parent("li").addClass("active"),p(".pane:visible").hide(),p(p(this).attr("href")).show()),!1}),i(".project-miniview"),p("body.node-type-project-2").length&&location.hash.length&&(my_query=location.hash.substr(1).split("/"),p(".pane[id='"+my_query[0]+"']").length&&(p(".project-tabs li").removeClass("active"),p(".project-tabs li a[href='#"+my_query[0]+"']").parent("li").addClass("active"),p(".pane:visible").hide(),p("#"+my_query[0]).show(0,function(){if("updates"==my_query[0]&&1<my_query.length){update_id=my_query[1];var e=p("article#update-"+update_id).offset().top;p("html:not(:animated),body:not(:animated)").animate({scrollTop:e-30},500)}}))),p("body.node-type-project-2 a.updates-jump").click(function(){return p(".project-tabs li a[href='#updates']").click(),!1}),p("body.node-type-project-2 .sponsor-ribbon").insertAfter("#pageheader").delay("2000").slideDown("slow"),p("#display_links a:not(.processed,.last)",e).click(function(){return p.ajax({type:"GET",url:this.href,context:this,success:function(e){p("#project_display").html(e.projects),p(".current").removeClass("current"),p(this).addClass("current"),i(".project-miniview")},dataType:"json",data:"js=1"}),!1}).addClass("processed"),p("#display_links ul.tabs div").click(function(){p(this).parent().click()}),p(".view-header a.browse-switch").click(function(){new_href=p(this).attr("href")+location.search,p(this).attr("href",new_href)}),p(".project-microview h3").each(function(){margin=(p(this).parent().height()-p(this).height())/2,p(this).css("marginTop",parseInt(margin)-3)}),p(".field-name-field-with-group input").click(function(){(0==p(this).val()&&p("fieldset.group-info .fieldset-wrapper:first:visible").length||1==p(this).val()&&p("fieldset.group-info .fieldset-wrapper:first:hidden").length)&&p("fieldset.group-info legend:first a").click()}),p(".field-name-field-group-503 input").click(function(){(0==p(this).val()&&p("fieldset.group-tax-info .fieldset-wrapper:visible").length||1==p(this).val()&&p("fieldset.group-tax-info .fieldset-wrapper:hidden").length)&&p("fieldset.group-tax-info legend a").click()}),p(".field-name-field-group-tax-fisc-ioby").hide(),p(".field-name-field-group-tax-fiscal input").click(function(){0==p(this).val()?(p(".field-name-field-group-tax-fisc-ioby:hidden").show(),p(".field-name-field-group-tax-fisc-spon:visible").hide()):(p(".field-name-field-group-tax-fisc-ioby:visible").hide(),p(".field-name-field-group-tax-fisc-spon:hidden").show())}),p(".field-name-field-project-volunteers input").click(function(){(0==p(this).val()&&p("fieldset.group-volunteer-info .fieldset-wrapper:visible").length||1==p(this).val()&&p("fieldset.group-volunteer-info .fieldset-wrapper:hidden").length)&&p("fieldset.group-volunteer-info legend a").click()}),p("#edit-field-project-inbrief textarea").change(function(){p("span.inbrief-length").html(p(this).val().length)}),trueRemove=!1,null!=Drupal.settings.iobypopup&&p(".page-cart .views-field-line-item-title:contains('gratuity')").length&&1<p("td.views-field").length&&p(".page-cart .views-field-line-item-title:contains('gratuity')").siblings(".views-field-edit-delete").children("input.delete-line-item").click(function(){return!!trueRemove||(remove_element=p(this),p("#dialog").remove(),p(this).prepend('<div id="dialog" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityRemove+"</div>"),p("#dialog").dialog({buttons:{remove:function(){trueRemove=!0,remove_element.click()},"include gratuity":function(){p(this).dialog("close").remove()}},closeOnEscape:!1,modal:!0,open:function(){p(".ui-dialog").find("button:last").focus()},resizable:!1}),!1)}),p.isFunction(p.colorbox)&&null!=Drupal.settings.iobypopup&&p(".page-cart .views-field-line-item-title:contains('gratuity')").once("linked").prepend('<div style="display:none"><div id="gratuity-info-popup" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityInfo+"</div></div>").append(' <a href="#gratuity-info-popup" class="colorbox-load">what\'s this?</a>').children("a").colorbox({innerWidth:500,inline:!0}),p("#iobyproject-donation-form").submit(function(){if(!p(this).find("#edit-donation").val().match(/^\d+(\.\d{2})?$/))return alert("To give to this project, please enter a valid dollar amount."),p(this).find("#edit-donation").focus(),!1}),0<p(".idea-tabs .tabs a.tab").length&&(p(".idea-tabs .tabs a.tab").click(function(e){this==p("li.about-you a")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(p(".idea-tabs .tabs a.tab.active").removeClass("active"),p(this).addClass("active"),this.hasAttribute("href")&&0<p(this).attr("href").length&&(href=p(this).attr("href"),0<href.length&&0<p(".idea-panel"+href).length&&(p(".wFormContainer .idea-panel.active").removeClass("active"),p(".idea-panel"+href).addClass("active")))):(p("li.about-you-disabled").removeClass("hidden"),p("li.about-you").addClass("hidden"),p(window).scrollTop(p("#step1").offset().top))):p(this).hasClass("active")||(p(".idea-tabs .tabs a.tab.active").removeClass("active"),p(this).addClass("active"),this.hasAttribute("href")&&0<p(this).attr("href").length&&(href=p(this).attr("href"),0<href.length&&0<p(".idea-panel"+href).length&&(p(".wFormContainer .idea-panel.active").removeClass("active"),p(".idea-panel"+href).addClass("active"))))}),p(".idea-tabs .panel-button").click(function(e){this==p(".button.panel-button.next-button")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(p("li.about-you-disabled").addClass("hidden"),p("li.about-you").removeClass("hidden"),p(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<p(this).attr("href").length&&(href=p(this).attr("href"),0<href.length&&0<p(".idea-panel"+href).length&&(p(".wFormContainer .idea-panel.active").removeClass("active"),p(".idea-panel"+href).addClass("active"),p(".idea-tabs a.tab[href="+href+"]").addClass("active")))):(p("li.about-you-disabled").removeClass("hidden"),p("li.about-you").addClass("hidden"),p(window).scrollTop(p("#step1").offset().top))):(p(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<p(this).attr("href").length&&(href=p(this).attr("href"),0<href.length&&0<p(".idea-panel"+href).length&&(p(".wFormContainer .idea-panel.active").removeClass("active"),p(".idea-panel"+href).addClass("active"),p(".idea-tabs a.tab[href="+href+"]").addClass("active"))))}),first_name=p("#user_data").data("first-name"),first_name&&p(".wFormContainer input#tfa_1").val(first_name),last_name=p("#user_data").data("last-name"),last_name&&p(".wFormContainer input#tfa_2").val(last_name),email=p("#user_data").data("email"),email&&p(".wFormContainer input#tfa_5").val(email)),0<p("#block-ioby-ioby-project-creation-indicator").length&&(current_path=window.location.pathname.toLowerCase(),p("#block-ioby-ioby-project-creation-indicator .ioby-step-indicator li").each(function(e){$li=p(this),$a=p(this).find("a"),0<$a.length&&(a_lower=$a.attr("href").toLowerCase(),-1!==a_lower.indexOf(current_path)&&$li.addClass("current"))})),p("a#quicktabs-tab-campaign_projects-1").click(function(){elEv=[],elEv.category="switch to map",elEv.action="click-map",elEv.label=window.location.pathname,n(elEv)}),p(".region-footer #block-block-1 .social li a").click(function(){elEv=[],elEv.category="footer social click",elEv.action="click-"+p(this).attr("class"),elEv.label=window.location.pathname,n(elEv)}),p(".block-multistep .active-step").parent("li").addClass("current"),p("#project-2-node-form .form-submit").addClass("button"),p(".or-after").after('<div class="or-divider"><span>Or</span><hr /></div>')}},p(function(){-1<window.location.href.indexOf("actioncorps")&&p("td").not(":has(p)").addClass("empty-td")}),p(function(){p(".hamburger").click(function(){p(this).toggleClass("is-active"),p("#off-canvas").toggleClass("slide-in")})}),p(function(){p("#page").fitVids(),p("span.nolink").click(function(){p(".hidden-2").toggleClass("show")})}),p(document).ready(function(){if(p(".hero").length){for(var e=p(".hero__text").attr("data-words").split(","),t=e.length;t--;)e[t]=e[t]+"&nbsp;";new Typed(".active-text",{strings:e,typeSpeed:80,showCursor:!0,backDelay:1200,startDelay:300,fadeOut:!0,loop:!0})}}),p(document).ready(function(){var t=p(".offcanvas"),e=p(".page-header__offcanvas-trigger"),i=p(".offcanvas__close"),a=p(document),n=p("body"),o=p(".page-wrapper"),s=p(".offcanvas__content"),l=s.height();p(".offcanvas__primary-nav .expanded").each(function(e){p(this).find("ul").slideUp(),p(this).hasClass("active")&&p(this).find("ul").slideDown()}),p(".expanded > span").bind("click",function(){a.unbind("click touchstart",c),p(this).parent().toggleClass("is-open"),p(window).width()<1140?(p(this).siblings("ul").slideToggle(),setTimeout(function(){l=s.height(),o.height(l)},400)):setTimeout(function(){a.bind("click touchstart",c)},400)});var r=function(e){void 0!==e.which&&27===e.which&&f()},d=function(e){p(e.target).closest(".offcanvas").length||f()},c=function(e){p(e.target).closest(".page-header__primary-nav .expanded ul").length||h()},f=function(e){p(".offcanvas__primary-nav").find(".is-open").removeClass("is-open"),p(".offcanvas__primary-nav").find("a").siblings("ul").slideUp(),t.removeClass("is-open"),n.removeClass("offcanvas-open"),a.unbind("keydown",r),a.unbind("click touchstart",d)},h=function(e){p(".page-header__primary-nav").find(".is-open").removeClass("is-open"),a.unbind("click touchstart",c)};e.bind("click touchstart",function(e){t.addClass("is-open"),l=s.height(),n.addClass("offcanvas-open"),o.height(l),a.keydown(r),setTimeout(function(){a.bind("click touchstart",d)},200)}),i.bind("click touchstart",function(e){f(e)})})}(jQuery);