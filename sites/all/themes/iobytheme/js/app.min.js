!function(f){Drupal.behaviors.iobytheme={attach:function(e,t){function i(e){f(e).hover(function(){f(this).children(".extra-info").addClass("is-active")},function(){f(this).children(".extra-info").removeClass("is-active")})}function a(e){if(0<f("#"+e+"-D").length)return f("#"+e+"-D").find(".errMsg").remove(),!!f("#"+e).val()||(f("#"+e+"-D").append('<div id="'+e+'-E" class="errMsg"><span>This field is required.</span></div>'),!1)}function n(e){ga("send","event",e.category.toLowerCase(),e.action.toLowerCase(),e.label.toLowerCase())}f(".page-add-project-step-2 fieldset.filter-wrapper").remove(),f(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-latitude").remove(),f(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-longitude").remove(),f(".node-project_2-form .location .location-current-coordinates-fieldset").remove(),f("a.login",e).click(function(){return f(this).toggleClass("activated").siblings(".region").fadeToggle("fast"),!1}),""!=f("#edit-search-block-form--2").val()&&f("#search-block-form label").hide(),f("#search-block-form label, #mc_embed_signup label, #mc_home_embed_signup label").click(function(){f(this).fadeOut("fast").next("input").focus()}),f("#search-block-form input, #mc_embed_signup input, #mc_home_embed_signup input").focus(function(){f(this).prev("label:visible").fadeOut("fast")}).blur(function(){""==f(this).val()&&f(this).prev("label").fadeIn("fast")}),f("body.page-add-project-step-2 .preview").length&&(f(".ioby-step-indicator li").removeClass("current").last().addClass("current"),f(".preview h3:first-child:visible").hide()),f("body.node-type-project-2 .project-tabs li a").click(function(){return f(this).parent("li").hasClass("active")||(f(".project-tabs li").removeClass("active"),f(this).parent("li").addClass("active"),f(".pane:visible").hide(),f(f(this).attr("href")).show()),!1}),i(".project-miniview"),f("body.node-type-project-2").length&&location.hash.length&&(my_query=location.hash.substr(1).split("/"),f(".pane[id='"+my_query[0]+"']").length&&(f(".project-tabs li").removeClass("active"),f(".project-tabs li a[href='#"+my_query[0]+"']").parent("li").addClass("active"),f(".pane:visible").hide(),f("#"+my_query[0]).show(0,function(){if("updates"==my_query[0]&&1<my_query.length){update_id=my_query[1];var e=f("article#update-"+update_id).offset().top;f("html:not(:animated),body:not(:animated)").animate({scrollTop:e-30},500)}}))),f("body.node-type-project-2 a.updates-jump").click(function(){return f(".project-tabs li a[href='#updates']").click(),!1}),f("body.node-type-project-2 .sponsor-ribbon").insertAfter("#pageheader").delay("2000").slideDown("slow"),f("#display_links a:not(.processed,.last)",e).click(function(){return f.ajax({type:"GET",url:this.href,context:this,success:function(e){f("#project_display").html(e.projects),f(".current").removeClass("current"),f(this).addClass("current"),i(".project-miniview")},dataType:"json",data:"js=1"}),!1}).addClass("processed"),f("#display_links ul.tabs div").click(function(){f(this).parent().click()}),f(".view-header a.browse-switch").click(function(){new_href=f(this).attr("href")+location.search,f(this).attr("href",new_href)}),f(".project-microview h3").each(function(){margin=(f(this).parent().height()-f(this).height())/2,f(this).css("marginTop",parseInt(margin)-3)}),f(".field-name-field-with-group input").click(function(){(0==f(this).val()&&f("fieldset.group-info .fieldset-wrapper:first:visible").length||1==f(this).val()&&f("fieldset.group-info .fieldset-wrapper:first:hidden").length)&&f("fieldset.group-info legend:first a").click()}),f(".field-name-field-group-503 input").click(function(){(0==f(this).val()&&f("fieldset.group-tax-info .fieldset-wrapper:visible").length||1==f(this).val()&&f("fieldset.group-tax-info .fieldset-wrapper:hidden").length)&&f("fieldset.group-tax-info legend a").click()}),f(".field-name-field-group-tax-fisc-ioby").hide(),f(".field-name-field-group-tax-fiscal input").click(function(){0==f(this).val()?(f(".field-name-field-group-tax-fisc-ioby:hidden").show(),f(".field-name-field-group-tax-fisc-spon:visible").hide()):(f(".field-name-field-group-tax-fisc-ioby:visible").hide(),f(".field-name-field-group-tax-fisc-spon:hidden").show())}),f(".field-name-field-project-volunteers input").click(function(){(0==f(this).val()&&f("fieldset.group-volunteer-info .fieldset-wrapper:visible").length||1==f(this).val()&&f("fieldset.group-volunteer-info .fieldset-wrapper:hidden").length)&&f("fieldset.group-volunteer-info legend a").click()}),f("#edit-field-project-inbrief textarea").change(function(){f("span.inbrief-length").html(f(this).val().length)}),trueRemove=!1,null!=Drupal.settings.iobypopup&&f(".page-cart .views-field-line-item-title:contains('gratuity')").length&&1<f("td.views-field").length&&f(".page-cart .views-field-line-item-title:contains('gratuity')").siblings(".views-field-edit-delete").children("input.delete-line-item").click(function(){return!!trueRemove||(remove_element=f(this),f("#dialog").remove(),f(this).prepend('<div id="dialog" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityRemove+"</div>"),f("#dialog").dialog({buttons:{remove:function(){trueRemove=!0,remove_element.click()},"include gratuity":function(){f(this).dialog("close").remove()}},closeOnEscape:!1,modal:!0,open:function(){f(".ui-dialog").find("button:last").focus()},resizable:!1}),!1)}),f.isFunction(f.colorbox)&&null!=Drupal.settings.iobypopup&&f(".page-cart .views-field-line-item-title:contains('gratuity')").once("linked").prepend('<div style="display:none"><div id="gratuity-info-popup" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityInfo+"</div></div>").append(' <a href="#gratuity-info-popup" class="colorbox-load">what\'s this?</a>').children("a").colorbox({innerWidth:500,inline:!0}),f("#iobyproject-donation-form").submit(function(){if(!f(this).find("#edit-donation").val().match(/^\d+(\.\d{2})?$/))return alert("To give to this project, please enter a valid dollar amount."),f(this).find("#edit-donation").focus(),!1}),0<f(".idea-tabs .tabs a.tab").length&&(f(".idea-tabs .tabs a.tab").click(function(e){this==f("li.about-you a")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(f(".idea-tabs .tabs a.tab.active").removeClass("active"),f(this).addClass("active"),this.hasAttribute("href")&&0<f(this).attr("href").length&&(href=f(this).attr("href"),0<href.length&&0<f(".idea-panel"+href).length&&(f(".wFormContainer .idea-panel.active").removeClass("active"),f(".idea-panel"+href).addClass("active")))):(f("li.about-you-disabled").removeClass("hidden"),f("li.about-you").addClass("hidden"),f(window).scrollTop(f("#step1").offset().top))):f(this).hasClass("active")||(f(".idea-tabs .tabs a.tab.active").removeClass("active"),f(this).addClass("active"),this.hasAttribute("href")&&0<f(this).attr("href").length&&(href=f(this).attr("href"),0<href.length&&0<f(".idea-panel"+href).length&&(f(".wFormContainer .idea-panel.active").removeClass("active"),f(".idea-panel"+href).addClass("active"))))}),f(".idea-tabs .panel-button").click(function(e){this==f(".button.panel-button.next-button")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(f("li.about-you-disabled").addClass("hidden"),f("li.about-you").removeClass("hidden"),f(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<f(this).attr("href").length&&(href=f(this).attr("href"),0<href.length&&0<f(".idea-panel"+href).length&&(f(".wFormContainer .idea-panel.active").removeClass("active"),f(".idea-panel"+href).addClass("active"),f(".idea-tabs a.tab[href="+href+"]").addClass("active")))):(f("li.about-you-disabled").removeClass("hidden"),f("li.about-you").addClass("hidden"),f(window).scrollTop(f("#step1").offset().top))):(f(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<f(this).attr("href").length&&(href=f(this).attr("href"),0<href.length&&0<f(".idea-panel"+href).length&&(f(".wFormContainer .idea-panel.active").removeClass("active"),f(".idea-panel"+href).addClass("active"),f(".idea-tabs a.tab[href="+href+"]").addClass("active"))))}),first_name=f("#user_data").data("first-name"),first_name&&f(".wFormContainer input#tfa_1").val(first_name),last_name=f("#user_data").data("last-name"),last_name&&f(".wFormContainer input#tfa_2").val(last_name),email=f("#user_data").data("email"),email&&f(".wFormContainer input#tfa_5").val(email)),0<f("#block-ioby-ioby-project-creation-indicator").length&&(current_path=window.location.pathname.toLowerCase(),f("#block-ioby-ioby-project-creation-indicator .ioby-step-indicator li").each(function(e){$li=f(this),$a=f(this).find("a"),0<$a.length&&(a_lower=$a.attr("href").toLowerCase(),-1!==a_lower.indexOf(current_path)&&$li.addClass("current"))})),f("a#quicktabs-tab-campaign_projects-1").click(function(){elEv=[],elEv.category="switch to map",elEv.action="click-map",elEv.label=window.location.pathname,n(elEv)}),f(".region-footer #block-block-1 .social li a").click(function(){elEv=[],elEv.category="footer social click",elEv.action="click-"+f(this).attr("class"),elEv.label=window.location.pathname,n(elEv)}),f(".block-multistep .active-step").parent("li").addClass("current"),f("#project-2-node-form .form-submit").addClass("button"),f(".or-after").after('<div class="or-divider"><span>Or</span><hr /></div>')}},f(function(){-1<window.location.href.indexOf("actioncorps")&&f("td").not(":has(p)").addClass("empty-td")}),f(function(){f(".hamburger").click(function(){f(this).toggleClass("is-active"),f("#off-canvas").toggleClass("slide-in")})}),f(function(){f("#page").fitVids(),f("span.nolink").click(function(){f(".hidden-2").toggleClass("show")})}),f(document).ready(function(){if(f(".hero").length){for(var e=f(".hero__text").attr("data-words").split(","),t=e.length;t--;)e[t]=e[t]+"&nbsp;";new Typed(".active-text",{strings:e,typeSpeed:80,showCursor:!0,backDelay:1200,startDelay:300,fadeOut:!0,loop:!0})}}),f(document).ready(function(){var t=f(".offcanvas"),e=f(".page-header__offcanvas-trigger"),i=f(".offcanvas__close"),a=f(document),n=f("body"),o=f(".page-wrapper"),s=f(".offcanvas__content"),l=s.height();f(".offcanvas__primary-nav .expanded").each(function(e){f(this).find("ul").slideUp(),f(this).hasClass("active")&&f(this).find("ul").slideDown()}),f(".expanded > span").bind("click",function(){f(this).parent().toggleClass("is-open"),f(this).siblings("ul").slideToggle(),setTimeout(function(){l=s.height(),o.height(l)},400)});var r=function(e){void 0!==e.which&&27===e.which&&c()},d=function(e){f(e.target).closest(".offcanvas").length||c()},c=function(e){f(".offcanvas__primary-nav").find(".is-open").removeClass("is-open"),f(".offcanvas__primary-nav").find("a").siblings("ul").slideUp(),t.removeClass("is-open"),n.removeClass("offcanvas-open"),a.unbind("keydown",r),a.unbind("click touchstart",d)};e.bind("click touchstart",function(e){t.addClass("is-open"),l=s.height(),n.addClass("offcanvas-open"),o.height(l),a.keydown(r),setTimeout(function(){a.bind("click touchstart",d)},200)}),i.bind("click touchstart",function(e){c(e)})})}(jQuery);