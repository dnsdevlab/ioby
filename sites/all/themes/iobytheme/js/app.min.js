!function(o){Drupal.behaviors.iobytheme={attach:function(e,t){function i(e){o(e).hover(function(){o(this).children(".extra-info").addClass("is-active")},function(){o(this).children(".extra-info").removeClass("is-active")})}function a(e){if(0<o("#"+e+"-D").length)return o("#"+e+"-D").find(".errMsg").remove(),!!o("#"+e).val()||(o("#"+e+"-D").append('<div id="'+e+'-E" class="errMsg"><span>This field is required.</span></div>'),!1)}function n(e){ga("send","event",e.category.toLowerCase(),e.action.toLowerCase(),e.label.toLowerCase())}o(".page-add-project-step-2 fieldset.filter-wrapper").remove(),o(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-latitude").remove(),o(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-longitude").remove(),o(".node-project_2-form .location .location-current-coordinates-fieldset").remove(),o("a.login",e).click(function(){return o(this).toggleClass("activated").siblings(".region").fadeToggle("fast"),!1}),""!=o("#edit-search-block-form--2").val()&&o("#search-block-form label").hide(),o("#search-block-form label, #mc_embed_signup label, #mc_home_embed_signup label").click(function(){o(this).fadeOut("fast").next("input").focus()}),o("#search-block-form input, #mc_embed_signup input, #mc_home_embed_signup input").focus(function(){o(this).prev("label:visible").fadeOut("fast")}).blur(function(){""==o(this).val()&&o(this).prev("label").fadeIn("fast")}),o("body.page-add-project-step-2 .preview").length&&(o(".ioby-step-indicator li").removeClass("current").last().addClass("current"),o(".preview h3:first-child:visible").hide()),o("body.node-type-project-2 .project-tabs li a").click(function(){return o(this).parent("li").hasClass("active")||(o(".project-tabs li").removeClass("active"),o(this).parent("li").addClass("active"),o(".pane:visible").hide(),o(o(this).attr("href")).show()),!1}),i(".project-miniview"),o("body.node-type-project-2").length&&location.hash.length&&(my_query=location.hash.substr(1).split("/"),o(".pane[id='"+my_query[0]+"']").length&&(o(".project-tabs li").removeClass("active"),o(".project-tabs li a[href='#"+my_query[0]+"']").parent("li").addClass("active"),o(".pane:visible").hide(),o("#"+my_query[0]).show(0,function(){if("updates"==my_query[0]&&1<my_query.length){update_id=my_query[1];var e=o("article#update-"+update_id).offset().top;o("html:not(:animated),body:not(:animated)").animate({scrollTop:e-30},500)}}))),o("body.node-type-project-2 a.updates-jump").click(function(){return o(".project-tabs li a[href='#updates']").click(),!1}),o("body.node-type-project-2 .sponsor-ribbon").insertAfter("#pageheader").delay("2000").slideDown("slow"),o("#display_links a:not(.processed,.last)",e).click(function(){return o.ajax({type:"GET",url:this.href,context:this,success:function(e){o("#project_display").html(e.projects),o(".current").removeClass("current"),o(this).addClass("current"),i(".project-miniview")},dataType:"json",data:"js=1"}),!1}).addClass("processed"),o("#display_links ul.tabs div").click(function(){o(this).parent().click()}),o(".view-header a.browse-switch").click(function(){new_href=o(this).attr("href")+location.search,o(this).attr("href",new_href)}),o(".project-microview h3").each(function(){margin=(o(this).parent().height()-o(this).height())/2,o(this).css("marginTop",parseInt(margin)-3)}),o(".field-name-field-with-group input").click(function(){(0==o(this).val()&&o("fieldset.group-info .fieldset-wrapper:first:visible").length||1==o(this).val()&&o("fieldset.group-info .fieldset-wrapper:first:hidden").length)&&o("fieldset.group-info legend:first a").click()}),o(".field-name-field-group-503 input").click(function(){(0==o(this).val()&&o("fieldset.group-tax-info .fieldset-wrapper:visible").length||1==o(this).val()&&o("fieldset.group-tax-info .fieldset-wrapper:hidden").length)&&o("fieldset.group-tax-info legend a").click()}),o(".field-name-field-group-tax-fisc-ioby").hide(),o(".field-name-field-group-tax-fiscal input").click(function(){0==o(this).val()?(o(".field-name-field-group-tax-fisc-ioby:hidden").show(),o(".field-name-field-group-tax-fisc-spon:visible").hide()):(o(".field-name-field-group-tax-fisc-ioby:visible").hide(),o(".field-name-field-group-tax-fisc-spon:hidden").show())}),o(".field-name-field-project-volunteers input").click(function(){(0==o(this).val()&&o("fieldset.group-volunteer-info .fieldset-wrapper:visible").length||1==o(this).val()&&o("fieldset.group-volunteer-info .fieldset-wrapper:hidden").length)&&o("fieldset.group-volunteer-info legend a").click()}),o("#edit-field-project-inbrief textarea").change(function(){o("span.inbrief-length").html(o(this).val().length)}),trueRemove=!1,null!=Drupal.settings.iobypopup&&o(".page-cart .views-field-line-item-title:contains('gratuity')").length&&1<o("td.views-field").length&&o(".page-cart .views-field-line-item-title:contains('gratuity')").siblings(".views-field-edit-delete").children("input.delete-line-item").click(function(){return!!trueRemove||(remove_element=o(this),o("#dialog").remove(),o(this).prepend('<div id="dialog" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityRemove+"</div>"),o("#dialog").dialog({buttons:{remove:function(){trueRemove=!0,remove_element.click()},"include gratuity":function(){o(this).dialog("close").remove()}},closeOnEscape:!1,modal:!0,open:function(){o(".ui-dialog").find("button:last").focus()},resizable:!1}),!1)}),o.isFunction(o.colorbox)&&null!=Drupal.settings.iobypopup&&o(".page-cart .views-field-line-item-title:contains('gratuity')").once("linked").prepend('<div style="display:none"><div id="gratuity-info-popup" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityInfo+"</div></div>").append(' <a href="#gratuity-info-popup" class="colorbox-load">what\'s this?</a>').children("a").colorbox({innerWidth:500,inline:!0}),o("#iobyproject-donation-form").submit(function(){if(!o(this).find("#edit-donation").val().match(/^\d+(\.\d{2})?$/))return alert("To give to this project, please enter a valid dollar amount."),o(this).find("#edit-donation").focus(),!1}),0<o(".idea-tabs .tabs a.tab").length&&(o(".idea-tabs .tabs a.tab").click(function(e){this==o("li.about-you a")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(o(".idea-tabs .tabs a.tab.active").removeClass("active"),o(this).addClass("active"),this.hasAttribute("href")&&0<o(this).attr("href").length&&(href=o(this).attr("href"),0<href.length&&0<o(".idea-panel"+href).length&&(o(".wFormContainer .idea-panel.active").removeClass("active"),o(".idea-panel"+href).addClass("active")))):(o("li.about-you-disabled").removeClass("hidden"),o("li.about-you").addClass("hidden"),o(window).scrollTop(o("#step1").offset().top))):o(this).hasClass("active")||(o(".idea-tabs .tabs a.tab.active").removeClass("active"),o(this).addClass("active"),this.hasAttribute("href")&&0<o(this).attr("href").length&&(href=o(this).attr("href"),0<href.length&&0<o(".idea-panel"+href).length&&(o(".wFormContainer .idea-panel.active").removeClass("active"),o(".idea-panel"+href).addClass("active"))))}),o(".idea-tabs .panel-button").click(function(e){this==o(".button.panel-button.next-button")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(o("li.about-you-disabled").addClass("hidden"),o("li.about-you").removeClass("hidden"),o(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<o(this).attr("href").length&&(href=o(this).attr("href"),0<href.length&&0<o(".idea-panel"+href).length&&(o(".wFormContainer .idea-panel.active").removeClass("active"),o(".idea-panel"+href).addClass("active"),o(".idea-tabs a.tab[href="+href+"]").addClass("active")))):(o("li.about-you-disabled").removeClass("hidden"),o("li.about-you").addClass("hidden"),o(window).scrollTop(o("#step1").offset().top))):(o(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<o(this).attr("href").length&&(href=o(this).attr("href"),0<href.length&&0<o(".idea-panel"+href).length&&(o(".wFormContainer .idea-panel.active").removeClass("active"),o(".idea-panel"+href).addClass("active"),o(".idea-tabs a.tab[href="+href+"]").addClass("active"))))}),first_name=o("#user_data").data("first-name"),first_name&&o(".wFormContainer input#tfa_1").val(first_name),last_name=o("#user_data").data("last-name"),last_name&&o(".wFormContainer input#tfa_2").val(last_name),email=o("#user_data").data("email"),email&&o(".wFormContainer input#tfa_5").val(email)),0<o("#block-ioby-ioby-project-creation-indicator").length&&(current_path=window.location.pathname.toLowerCase(),o("#block-ioby-ioby-project-creation-indicator .ioby-step-indicator li").each(function(e){$li=o(this),$a=o(this).find("a"),0<$a.length&&(a_lower=$a.attr("href").toLowerCase(),-1!==a_lower.indexOf(current_path)&&$li.addClass("current"))})),o("a#quicktabs-tab-campaign_projects-1").click(function(){elEv=[],elEv.category="switch to map",elEv.action="click-map",elEv.label=window.location.pathname,n(elEv)}),o(".region-footer #block-block-1 .social li a").click(function(){elEv=[],elEv.category="footer social click",elEv.action="click-"+o(this).attr("class"),elEv.label=window.location.pathname,n(elEv)}),o(".block-multistep .active-step").parent("li").addClass("current"),o("#project-2-node-form .form-submit").addClass("button"),o(".or-after").after('<div class="or-divider"><span>Or</span><hr /></div>')}},o(function(){-1<window.location.href.indexOf("actioncorps")&&o("td").not(":has(p)").addClass("empty-td")}),o(function(){o(".hamburger").click(function(){o(this).toggleClass("is-active"),o("#off-canvas").toggleClass("slide-in")})}),o(function(){o("#page").fitVids(),o("span.nolink").click(function(){o(".hidden-2").toggleClass("show")})})}(jQuery);