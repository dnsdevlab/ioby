!function(e){Drupal.behaviors.iobytheme={attach:function(t,i){function a(t){e(t).hover(function(){e(this).children(".extra-info").addClass("is-active")},function(){e(this).children(".extra-info").removeClass("is-active")})}function n(t){if(e("#"+t+"-D").length>0)return e("#"+t+"-D").find(".errMsg").remove(),!!e("#"+t).val()||(e("#"+t+"-D").append('<div id="'+t+'-E" class="errMsg"><span>This field is required.</span></div>'),!1)}function o(e){ga("send","event",e.category.toLowerCase(),e.action.toLowerCase(),e.label.toLowerCase())}e(".page-add-project-step-2 fieldset.filter-wrapper").remove(),e(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-latitude").remove(),e(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-longitude").remove(),e(".node-project_2-form .location .location-current-coordinates-fieldset").remove(),e("a.login",t).click(function(){return e(this).toggleClass("activated").siblings(".region").fadeToggle("fast"),!1}),""!=e("#edit-search-block-form--2").val()&&e("#search-block-form label").hide(),e("#search-block-form label, #mc_embed_signup label, #mc_home_embed_signup label").click(function(){e(this).fadeOut("fast").next("input").focus()}),e("#search-block-form input, #mc_embed_signup input, #mc_home_embed_signup input").focus(function(){e(this).prev("label:visible").fadeOut("fast")}).blur(function(){""==e(this).val()&&e(this).prev("label").fadeIn("fast")}),e("body.page-add-project-step-2 .preview").length&&(e(".ioby-step-indicator li").removeClass("current").last().addClass("current"),e(".preview h3:first-child:visible").hide()),e("body.node-type-project-2 .project-tabs li a").click(function(){return!e(this).parent("li").hasClass("active")&&(e(".project-tabs li").removeClass("active"),e(this).parent("li").addClass("active"),e(".pane:visible").hide(),e(e(this).attr("href")).show(),!1)}),a(".project-miniview"),e("body.node-type-project-2").length&&location.hash.length&&(my_query=location.hash.substr(1).split("/"),e(".pane[id='"+my_query[0]+"']").length&&(e(".project-tabs li").removeClass("active"),e(".project-tabs li a[href='#"+my_query[0]+"']").parent("li").addClass("active"),e(".pane:visible").hide(),e("#"+my_query[0]).show(0,function(){if("updates"==my_query[0]&&my_query.length>1){update_id=my_query[1];var t=e("article#update-"+update_id).offset().top;e("html:not(:animated),body:not(:animated)").animate({scrollTop:t-30},500)}}))),e("body.node-type-project-2 a.updates-jump").click(function(){return e(".project-tabs li a[href='#updates']").click(),!1}),e("body.node-type-project-2 .sponsor-ribbon").insertAfter("#pageheader").delay("2000").slideDown("slow"),e("#display_links a:not(.processed,.last)",t).click(function(){return e.ajax({type:"GET",url:this.href,context:this,success:function(t){e("#project_display").html(t.projects),e(".current").removeClass("current"),e(this).addClass("current"),a(".project-miniview")},dataType:"json",data:"js=1"}),!1}).addClass("processed"),e("#display_links ul.tabs div").click(function(){e(this).parent().click()}),e(".view-header a.browse-switch").click(function(){new_href=e(this).attr("href")+location.search,e(this).attr("href",new_href)}),e(".project-microview h3").each(function(){margin=(e(this).parent().height()-e(this).height())/2,e(this).css("marginTop",parseInt(margin)-3)}),e(".field-name-field-with-group input").click(function(){(0==e(this).val()&&e("fieldset.group-info .fieldset-wrapper:first:visible").length||1==e(this).val()&&e("fieldset.group-info .fieldset-wrapper:first:hidden").length)&&e("fieldset.group-info legend:first a").click()}),e(".field-name-field-group-503 input").click(function(){(0==e(this).val()&&e("fieldset.group-tax-info .fieldset-wrapper:visible").length||1==e(this).val()&&e("fieldset.group-tax-info .fieldset-wrapper:hidden").length)&&e("fieldset.group-tax-info legend a").click()}),e(".field-name-field-group-tax-fisc-ioby").hide(),e(".field-name-field-group-tax-fiscal input").click(function(){0==e(this).val()?(e(".field-name-field-group-tax-fisc-ioby:hidden").show(),e(".field-name-field-group-tax-fisc-spon:visible").hide()):(e(".field-name-field-group-tax-fisc-ioby:visible").hide(),e(".field-name-field-group-tax-fisc-spon:hidden").show())}),e(".field-name-field-project-volunteers input").click(function(){(0==e(this).val()&&e("fieldset.group-volunteer-info .fieldset-wrapper:visible").length||1==e(this).val()&&e("fieldset.group-volunteer-info .fieldset-wrapper:hidden").length)&&e("fieldset.group-volunteer-info legend a").click()}),e("#edit-field-project-inbrief textarea").change(function(){e("span.inbrief-length").html(e(this).val().length)}),trueRemove=!1,void 0!=Drupal.settings.iobypopup&&e(".page-cart .views-field-line-item-title:contains('gratuity')").length&&e("td.views-field").length>1&&e(".page-cart .views-field-line-item-title:contains('gratuity')").siblings(".views-field-edit-delete").children("input.delete-line-item").click(function(){return!!trueRemove||(remove_element=e(this),e("#dialog").remove(),e(this).prepend('<div id="dialog" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityRemove+"</div>"),e("#dialog").dialog({buttons:{remove:function(){trueRemove=!0,remove_element.click()},"include gratuity":function(){e(this).dialog("close").remove()}},closeOnEscape:!1,modal:!0,open:function(){e(".ui-dialog").find("button:last").focus()},resizable:!1}),!1)}),e.isFunction(e.colorbox)&&void 0!=Drupal.settings.iobypopup&&e(".page-cart .views-field-line-item-title:contains('gratuity')").once("linked").prepend('<div style="display:none"><div id="gratuity-info-popup" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityInfo+"</div></div>").append(' <a href="#gratuity-info-popup" class="colorbox-load">what\'s this?</a>').children("a").colorbox({innerWidth:500,inline:!0}),e("#iobyproject-donation-form").submit(function(){if(!e(this).find("#edit-donation").val().match(/^\d+(\.\d{2})?$/))return alert("To give to this project, please enter a valid dollar amount."),e(this).find("#edit-donation").focus(),!1}),e(".idea-tabs .tabs a.tab").length>0&&(e(".idea-tabs .tabs a.tab").click(function(t){this==e("li.about-you a")[0]?($valid1=n("tfa_10"),$valid2=n("tfa_11"),$valid3=n("tfa_14"),$valid1&&$valid2&&$valid3?(e(".idea-tabs .tabs a.tab.active").removeClass("active"),e(this).addClass("active"),this.hasAttribute("href")&&e(this).attr("href").length>0&&(href=e(this).attr("href"),href.length>0&&e(".idea-panel"+href).length>0&&(e(".wFormContainer .idea-panel.active").removeClass("active"),e(".idea-panel"+href).addClass("active")))):(e("li.about-you-disabled").removeClass("hidden"),e("li.about-you").addClass("hidden"),e(window).scrollTop(e("#step1").offset().top))):e(this).hasClass("active")||(e(".idea-tabs .tabs a.tab.active").removeClass("active"),e(this).addClass("active"),this.hasAttribute("href")&&e(this).attr("href").length>0&&(href=e(this).attr("href"),href.length>0&&e(".idea-panel"+href).length>0&&(e(".wFormContainer .idea-panel.active").removeClass("active"),e(".idea-panel"+href).addClass("active"))))}),e(".idea-tabs .panel-button").click(function(t){this==e(".button.panel-button.next-button")[0]?($valid1=n("tfa_10"),$valid2=n("tfa_11"),$valid3=n("tfa_14"),$valid1&&$valid2&&$valid3?(e("li.about-you-disabled").addClass("hidden"),e("li.about-you").removeClass("hidden"),e(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&e(this).attr("href").length>0&&(href=e(this).attr("href"),href.length>0&&e(".idea-panel"+href).length>0&&(e(".wFormContainer .idea-panel.active").removeClass("active"),e(".idea-panel"+href).addClass("active"),e(".idea-tabs a.tab[href="+href+"]").addClass("active")))):(e("li.about-you-disabled").removeClass("hidden"),e("li.about-you").addClass("hidden"),e(window).scrollTop(e("#step1").offset().top))):(e(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&e(this).attr("href").length>0&&(href=e(this).attr("href"),href.length>0&&e(".idea-panel"+href).length>0&&(e(".wFormContainer .idea-panel.active").removeClass("active"),e(".idea-panel"+href).addClass("active"),e(".idea-tabs a.tab[href="+href+"]").addClass("active"))))}),first_name=e("#user_data").data("first-name"),first_name&&e(".wFormContainer input#tfa_1").val(first_name),last_name=e("#user_data").data("last-name"),last_name&&e(".wFormContainer input#tfa_2").val(last_name),email=e("#user_data").data("email"),email&&e(".wFormContainer input#tfa_5").val(email)),e("#block-ioby-ioby-project-creation-indicator").length>0&&(current_path=window.location.pathname.toLowerCase(),e("#block-ioby-ioby-project-creation-indicator .ioby-step-indicator li").each(function(t){$li=e(this),$a=e(this).find("a"),$a.length>0&&(a_lower=$a.attr("href").toLowerCase(),-1!==a_lower.indexOf(current_path)&&$li.addClass("current"))})),e("a#quicktabs-tab-campaign_projects-1").click(function(){elEv=[],elEv.category="switch to map",elEv.action="click-map",elEv.label=window.location.pathname,o(elEv)}),e(".region-footer #block-block-1 .social li a").click(function(){elEv=[],elEv.category="footer social click",elEv.action="click-"+e(this).attr("class"),elEv.label=window.location.pathname,o(elEv)}),e(".block-multistep .active-step").parent("li").addClass("current"),e("#project-2-node-form .form-submit").addClass("button"),e(".or-after").after('<div class="or-divider"><span>Or</span><hr /></div>')}},e(function(){window.location.href.indexOf("actioncorps")>-1&&e("td").not(":has(p)").addClass("empty-td")}),e(function(){e(".hamburger").click(function(){e(this).toggleClass("is-active"),e("#off-canvas").toggleClass("slide-in")})}),jQuery(function(){jQuery("#page").fitVids(),jQuery("span.nolink").click(function(){jQuery(".hidden-2").toggleClass("show")})})}(jQuery),function(e){Drupal.behaviors.iobytheme={attach:function(t,i){function a(t){var i=t.text();e({countNum:0}).animate({countNum:i},{duration:1200,easing:"linear",step:function(){t.text(Math.floor(this.countNum))},complete:function(){t.text(this.countNum)}})}function n(e){var t=e.attr("data-percent");console.log(e.siblings(".progress-bar__bar").find(".overlay").css("width")),e.siblings(".progress-bar__bar").find(".overlay").animate({width:100-t+"%"},{duration:800,easing:"linear",complete:function(){}})}new Waypoint.Inview({element:e(".happening-callout:nth-of-type(1) .progress-bar__number")[0],entered:function(t,i){a(e(this.element)),n(e(this.element)),this.destroy()}}),new Waypoint.Inview({element:e(".happening-callout:nth-of-type(2) .progress-bar__number")[0],enter:function(t,i){a(e(this.element)),n(e(this.element)),this.destroy()}}),new Waypoint.Inview({element:e(".happening-callout:nth-of-type(3) .progress-bar__number")[0],enter:function(t,i){a(e(this.element)),n(e(this.element)),this.destroy()}}),new Typed(".active-text",{strings:["great.","greener.","closer.","smarter.","faster.","stronger.","great.","greener.","closer.","smarter.","faster.","stronger.","great.","greener.","closer.","smarter.","faster.","stronger."],typeSpeed:30,showCursor:!0,backDelay:1800,startDelay:1200});e(".page-header").clone().prependTo("body").wrap("<div id='mobile-header'></div>"),e(".refresh-hamburger").click(function(){e("body").toggleClass("mobile-open"),e("#mobile-header").fadeToggle()}),e(".page-header__main-nav > ul > li").each(function(){e(this).has("ul").length&&e(this).addClass("hasChildren")}),e(".hasChildren > a").click(function(t){t.preventDefault(),e(this).parent().find("ul").slideToggle()}),e("li.login > a").click(function(t){t.preventDefault(),e(this).parent().toggleClass("form-hidden")}),e("li.search > a").click(function(t){t.preventDefault(),e(this).parent().toggleClass("form-hidden")}),e("li.hasChildren").hover(function(){e(this).addClass("show-children")},function(){e(this).removeClass("show-children")})}}}(jQuery);